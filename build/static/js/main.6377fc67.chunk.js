(this["webpackJsonpavoid-square"]=this["webpackJsonpavoid-square"]||[]).push([[0],[,,,,,,,function(e,t,a){e.exports=a(15)},,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(2),s=a.n(o),i=(a(12),a(13),a(14),a(3)),c=a(4),l=a(6),u=a(5);var d=function(e){return n.a.createElement("div",{style:{width:50,height:50,border:"2px solid black",cursor:"pointer"},onClick:function(){return e.click()}},n.a.createElement("div",{style:{height:"25px",width:"25px",margin:"12px",backgroundColor:0===e.state?"#fff":1===e.state?"#f33":"#333",borderRadius:"50%",display:"inline-block"}}))};var h=function(e){for(var t=[],a=0,r=function(t){return function(){return e.click(t)}},o=0;o<e.width;o++){for(var s=[],i=0;i<e.width;i++)s.push(n.a.createElement("div",{key:i,style:{display:"inline-block"}},n.a.createElement(d,{state:e.board[a],click:r(a)}))),a++;t.push(n.a.createElement("div",{key:o,style:{height:"54px"}},s))}return n.a.createElement("div",{style:{padding:"10px"}},t)};function v(e){for(var t=Math.sqrt(e.length),a=0;a<t-1;a++)for(var r=0;r<t-1;r++)for(var n=1;n<t-a;n++)for(var o=0;o<t-r;o++){var s=e[a+r*t];if(0!==s){for(var i=!1,c=n,l=o,u=a+n,d=r+o,h=0;h<3;h++){if(u<0||d<0||u>=t||d>=t){i=!0;break}if(e[u+d*t]!==s){i=!0;break}var v=c;u+=c=-l,d+=l=v}if(!i)return!1}}return!0}function f(e){for(var t=0,a=0,r=Math.sqrt(e.length),n=0;n<r;n++)for(var o=0;o<r;o++)1===e[n+o*r]&&(t+=n+.5-r/2,a+=o+.5-r/2),2===e[n+o*r]&&(t+=.9*(n+.5-r/2),a+=.9*(o+.5-r/2));for(var s=Math.abs(t)>Math.abs(a),i=new Array(e.length),c=0;c<r;c++)for(var l=0;l<r;l++){var u=c,d=l;t<0&&(u=r-1-u),a<0&&(d=r-1-d);var h=c,v=l;if(s){var f=h;h=v,v=f}i[h+v*r]=e[u+d*r]}return function(e){for(var t=Math.sqrt(e.length),a="",r=0;r<t;r++){for(var n=0;n<t;n++)a+=e[r+n*t];a+="\n"}return a}(i)}var m=new Map,k=[];function p(){return m.size}var b=function(e){return n.a.createElement("form",null,n.a.createElement("input",{type:"checkbox",id:"red",onChange:e.red}),n.a.createElement("label",{htmlFor:"red"},"AI Plays Red"),n.a.createElement("br",null),n.a.createElement("input",{type:"checkbox",id:"black",defaultChecked:!0,onChange:e.black}),n.a.createElement("label",{htmlFor:"black"},"AI Plays Black"),n.a.createElement("br",null),n.a.createElement("input",{type:"checkbox",id:"stats",onChange:e.stats}),n.a.createElement("label",{htmlFor:"stats"},"Display AI Stats"),n.a.createElement("br",null))};var g=function(e){var t="Game is a draw";return e.score>0&&(t="Red can win"),e.score<0&&(t="Black can win"),n.a.createElement("div",null,n.a.createElement("div",null,t),n.a.createElement("div",null,"Positions Checked: ",e.positionsChecked),n.a.createElement("div",null,"Best Moves (index): ",e.bestMoves.join(", ")))},E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;Object(i.a)(this,a),(r=t.call(this,e)).boardClick=function(e,t){if(!r.state.gameOver&&0===r.state.board[e]){var a=r.state.moves%2+1;if(t||!(1===a&&r.state.aiRed||2===a&&r.state.aiBlack)){var n=r.state.board.slice(0);n[e]=a,r.setState({board:n,moves:r.state.moves+1},(function(){setTimeout((function(){r.doAIStats(n,3-a)}),0)}))}}},r.aiRedClick=function(e){r.setState({aiRed:e.target.checked}),r.state.moves%2===0&&setTimeout((function(){r.aiMove()}),0)},r.aiBlackClick=function(e){r.setState({aiBlack:e.target.checked}),r.state.moves%2===1&&setTimeout((function(){r.aiMove()}),0)},r.statsClick=function(e){r.setState({stats:e.target.checked})},r.reset=function(){var e=new Array(r.props.width*r.props.width);e.fill(0),r.setState({board:e,moves:0,score:0,lastBestMove:[],positionsChecked:0,gameOver:!1},(function(){setTimeout((function(){r.state.aiRed&&r.doAIStats(r.state.board,1)}),200)}))};var n=new Array(e.width*e.width);return n.fill(0),r.state={board:n,moves:0,stats:!1,aiRed:!1,aiBlack:!0,score:0,lastBestMove:[],positionsChecked:0,gameOver:!1},r}return Object(c.a)(a,[{key:"doAIStats",value:function(e,t){var a=this;console.log(e);var r=function e(t,a,r){r&&(k=[]);var n=f(t);if(m.has(n))return m.get(n);var o=3-a;if(!v(t)){var s=1===a?1:-1;return m.set(n,s),s}for(var i=-9,c=9,l=[],u=[],d=0,h=0;h<t.length;h++)if(0===t[h]){r&&console.log(h),d++;var p=t.slice(0);p[h]=a;var b=e(p,o);if(b===i&&l.push(h),b===c&&u.push(h),b>i&&(i=b,l=[h]),b<c&&(c=b,u=[h]),1===a&&i>0)break;if(1!==a&&c<0)break}if(r&&(k=1===a?l:u),0===d)return m.set(n,0),0;var g=1===a?i:c;return m.set(n,g),m.size>15e6&&(console.log("clear"),m=new Map),g}(e,t,!0);console.log("Board",e),console.log("Turn",t),console.log("Score",r),console.log("Best Move",k),console.log("Positions Checked",p()),v(e)&&16!==this.state.moves||this.setState({gameOver:!0}),this.setState({score:r,lastBestMove:k,positionsChecked:p()}),k.length>=0&&(2===t&&this.state.aiBlack||1===t&&this.state.aiRed)&&setTimeout((function(){a.boardClick(k[Math.floor(Math.random()*k.length)],!0)}),100),m=new Map}},{key:"aiMove",value:function(){this.doAIStats(this.state.board,this.state.moves%2+1)}},{key:"render",value:function(){var e=null;if(this.state.gameOver){var t="Tie!";this.state.score>0&&(t="Red Wins!"),this.state.score<0&&(t="Black Wins!"),e=n.a.createElement("div",null,n.a.createElement("h4",null,t),n.a.createElement("button",{onClick:this.reset},"Reset"))}return n.a.createElement("div",null,n.a.createElement(h,{width:this.props.width,board:this.state.board,click:this.boardClick}),e,n.a.createElement(b,{red:this.aiRedClick,black:this.aiBlackClick,stats:this.statsClick}),this.state.stats?n.a.createElement(g,{score:this.state.score,bestMoves:this.state.lastBestMove,positionsChecked:this.state.positionsChecked}):null)}}]),a}(n.a.Component);var w=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("h2",null,"Avoid Square 4x4"),"Click any square to place a piece.",n.a.createElement(E,{width:4}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[7,1,2]]]);
//# sourceMappingURL=main.6377fc67.chunk.js.map